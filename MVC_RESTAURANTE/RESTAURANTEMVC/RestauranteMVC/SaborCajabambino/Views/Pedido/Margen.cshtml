@model IEnumerable<SaborCajabambino.Models.PedidoMargenViewModel>

@{
    ViewData["Title"] = "Margen por Pedido";
}

<h2>Utilidad por Pedido</h2>

<div class="col-md-12">
            <div class="d-flex align-items-center">
                <!-- Barra de búsqueda -->
                <div class="input-group m-4">
                    <span class="input-group-text bg-white border-end-0">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-search" viewBox="0 0 16 16">
                            <path d="M11.742 10.344a6.5 6.5 0 1 0-1.397 1.397l3.85 3.85a1 1 0 0 0 1.415-1.414l-3.85-3.85zM12 6.5a5.5 5.5 0 1 1-11 0 5.5 5.5 0 0 1 11 0z" />
                        </svg>
                    </span>
                    <input type="text" id="searchInput" class="form-control border-start-0" placeholder="Buscar empleado...">
                </div>
                <!-- Botón para agregar un nuevo elemento -->
                <a asp-action="Create" class="btn btn-dark d-flex align-items-center rounded-pill">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus-lg me-1" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 2a.5.5 0 0 1 .5.5v5h5a.5.5 0 0 1 0 1h-5v5a.5.5 0 0 1-1 0v-5h-5a.5.5 0 0 1 0-1h5v-5A.5.5 0 0 1 8 2z" />
                    </svg>
                    Agregar nuevo Pedido
                </a>
            </div>
        
<div class="table-responsive">
        <table class="table table-hover">
            <thead class="table-dark sticky-top">
            <tr>
                <th>Cliente</th>
                <th>Producto</th>
                <th>Empleado</th>
                <th>Mesa</th>
                <th>Precio Venta</th>
                <th>Costo Total</th>
                <th>Utilidad</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var item in Model)
            {
                <tr>
                    <td>@item.Cliente</td>
                    <td>@item.Nombre</td>
                    <td>@item.Empleado</td>
                    <td>@item.Mesa</td>
                    <td>
                          <span class="badge bg-warning">@item.PrecioVentaTotal.ToString("C")</span>
                    </td>
                    <td>
                            <span class="badge bg-danger">@item.CostoTotal.ToString("C")</span>
                        </td>
                    <td>
                        <span class="badge @(item.Margen > 0 ? "bg-success" : "bg-danger")">
                            @item.Margen.ToString("C")
                        </span>
                    </td>
                </tr>
            }
        </tbody>
    </table>
</div>

<style>
    .table-responsive {
        max-height: 70vh;
        overflow-y: auto;
    }

    .table thead th {
        position: sticky;
        top: 0;
        z-index: 1;
    }

    .badge {
        font-size: 1em;
        padding: 0.5em 0.7em;
    }
</style>